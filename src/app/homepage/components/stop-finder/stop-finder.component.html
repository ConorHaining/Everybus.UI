<div class="w-full px-4">
    <button class="btn w-full" (click)="togglePicker()">🔍 Find your stop</button>
</div>

<ng-container *ngIf="showPicker">
    <div class="absolute h-screen w-screen inset-0 bg-white">
        <header class="bg-green-200 h-20 px-4 py-2 flex items-center justify-between">
            <h1 class="text-3xl">Find your stop</h1>
            <button (click)="togglePicker()">❌</button>
        </header>
        <section 
            class="p-2"
            role="combobox"
            aria-haspopup="listbox"
            aria-owns="stop-suggestions"
            aria-expanded="true">
            <div class="flex rounded-sm text-lg bg-gray-200 border-4 border-green-900 w-full">
                <label class="sr-only" for="stop-search">Search for a stop by name</label>
                <span class="sr-only">Begin typing to filter a stop, use the up and down keys to move along the pl-list</span>
                <input 
                    type="text"
                    name="stop-search"
                    id="stop-search"
                    autofocus="true"
                    autocomplete="off"
                    autocapitalize="off"
                    class="p-4 flex-grow bg-gray-200 focus:bg-white"
                    [(ngModel)]="stopInput"
                    aria-autocomplete="list"
                    aria-controls="stop-suggestions"
                    [attr.aria-activedescendant]="activeDescendant"
                    />
            </div>
            <ul id="stop-suggestions" role="listbox">
                <pl-stop-option 
                    *ngFor="let stop of stops | stopFilter:stopInput | slice:0:10 ; let i=index"
                    [label]="stop.name"
                    [identifer]="stop.atco_code"
                    (click)="goToDepartures(stop.atco_code)"
                    class="border-b truncate overflow py-2 hover:bg-gray-300 focus:bg-gray-300 grid grid-cols-6 grid-rows-1">

                    <div class="row-span-2 col-span-1 flex justify-center items-center">🚌</div>
                    <span class="mr-2 row-span-1 col-start-2 colspan-4">{{ stop.name }}</span>
                    <small class="row-span-1 col-start-2 colspan-4">Towards
                        {{ stop.destinations | destinationsOutput }}</small>
                </pl-stop-option>
            </ul>
        </section>
    </div>
</ng-container>